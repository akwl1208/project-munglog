<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.inyo.munglog.dao.GoodsDAO">
	
	<!-- select ************************************************************************************************ -->
	<!-- cri로 굿즈 리스트 가져오기 -->
	<select id="selectGoodsList" resultType="kr.inyo.munglog.vo.GoodsVO">
		select goods.*, min(ot_price) as gs_price from goods
			join `option` on goods.gs_num = `option`.ot_gs_num
			<if test = "searchType != ''">
				where ${searchType} like concat('%',#{keyword},'%') 
			</if> 
		  group by gs_num
		  order by gs_reg_date desc
		  limit #{pageStart}, #{perPageNum}
	</select>
	
	<!-- cri로 굿즈 총 개수 가져오기 -->
	<select id="selectGoodsTotalCount" resultType="int">
		select count(*) from goods
			<if test = "searchType != ''">
				where ${searchType} like concat('%',#{keyword},'%') 
			</if>
	</select>
	
	<!-- 카테고리 리스트 가져오기 -->
	<select id="selectCategoryList" resultType="kr.inyo.munglog.vo.CategoryVO">
		select * from category
	</select>
	<!-- insert *********************************************************************************************** -->
	
	<!-- update ************************************************************************************************* -->
	
	<!-- delete ************************************************************************************************* -->

</mapper>